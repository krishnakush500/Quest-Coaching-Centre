<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QUEST COACHING CENTRE</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  
  <!-- html2pdf library for PDF generation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { 
      background:linear-gradient(to bottom, #f5f5f5, #e0e7ff); 
      min-height:100vh; 
      padding:0;
    }
    .container { 
      width:100%; 
      max-width:1200px; 
      margin:0 auto;
      background:rgba(255,255,255,0.98); 
      border-radius:0;
      box-shadow:0 5px 20px rgba(0,0,0,0.1); 
      overflow:hidden; 
      min-height:100vh;
    }

    /* Header */
    .header { 
      background:linear-gradient(to right,#1a237e,#283593,#303f9f); 
      color:white; 
      padding:20px 15px;
      text-align:center; 
      position:relative; 
      overflow:hidden; 
    }
    .school-name { 
      font-size:1.8rem;
      font-weight:700; 
      line-height:1.2; 
    }
    .location { 
      font-size:0.95rem; 
      margin-bottom:10px; 
    }
    .director-info { 
      display:flex; 
      align-items:center; 
      justify-content:center; 
      margin-top:15px; 
      flex-wrap:wrap; 
    }
    .director-photo { 
      width:90px;
      height:90px; 
      border-radius:50%; 
      border:3px solid white;
      overflow:hidden; 
      margin-right:12px; 
      cursor:pointer; 
      transition:transform 0.3s; 
    }
    .director-photo:hover { 
      transform:scale(1.05); 
      box-shadow:0 0 15px rgba(255,255,255,0.5); 
    }
    .director-photo img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .director-details{
      text-align:left;
    }
    .director-details h2{
      font-size:0.95rem; 
      margin-bottom:4px;
    }
    .director-details h3{
      font-size:1rem; 
      margin-bottom:4px; 
      color: white;
      cursor: default;
    }
    .director-details p{
      font-size:0.85rem;
    }

    /* Moving Admission Text */
    .marquee-container {
      background:#ffc107;
      overflow:hidden;
      position:relative;
      height:45px;
      display:flex;
      align-items:center;
    }
    .marquee-content {
      display:flex;
      animation: marquee 20s linear infinite;
      white-space:nowrap;
      font-weight:600;
      font-size:1rem;
      color:#333;
    }
    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    /* Main Tabs Navigation */
    .main-tabs {
      display: flex;
      background: white;
      border-bottom: 2px solid #1a237e;
      position: relative;
      z-index: 10;
    }
    .tab-btn {
      flex: 1;
      padding: 16px 10px;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      background: transparent;
      color: #666;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      border-bottom: 3px solid transparent;
    }
    .tab-btn:hover {
      background: #f5f5f5;
      color: #1a237e;
    }
    .tab-btn.active {
      color: #1a237e;
      border-bottom: 3px solid #1a237e;
      background: #f0f7ff;
    }
    .tab-btn i {
      font-size: 1.1rem;
    }

    /* Content Sections */
    .tab-content {
      display: none;
      padding: 0;
      min-height: 400px;
    }
    .tab-content.active {
      display: block;
    }

    /* Results Section */
    .results-section {
      padding: 20px 15px;
      background: #f9f9f9;
      min-height: 500px;
    }
    .section-title {
      font-size: 1.4rem;
      color: #1a237e;
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 8px;
      border-bottom: 2px solid #1a237e;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .section-title i {
      color: #ffc107;
    }
    .results-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
    }
    .result-item {
      background: white;
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: all 0.3s;
      border-left: 4px solid #1a237e;
      position: relative;
    }
    .result-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.12);
    }
    .result-item.active {
      border-left-color: #ffc107;
      background: #fffae6;
    }
    .exam-name {
      font-size: 0.95rem;
      color: #1a237e;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .exam-date {
      font-size: 0.75rem;
      color: #666;
      margin-bottom: 4px;
    }
    
    /* NEW Sticker */
    .new-sticker {
      position: absolute;
      top: -6px;
      right: -6px;
      background: #ff4757;
      color: white;
      font-size: 0.65rem;
      font-weight: bold;
      padding: 3px 7px;
      border-radius: 8px;
      animation: blink 1s infinite;
      z-index: 10;
    }
    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .roll-input-section {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      margin-top: 15px;
      text-align: center;
      display: none;
    }
    .roll-input-section h3 {
      color: #1a237e;
      margin-bottom: 12px;
      font-size: 1rem;
    }
    .input-group {
      display: flex;
      justify-content: center;
      gap: 6px;
      flex-wrap: wrap;
    }
    .input-group input {
      padding: 8px 10px;
      font-size: 0.9rem;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 100%;
      max-width: 220px;
    }
    .result-btn {
      padding: 8px 16px;
      background: #1a237e;
      color: white;
      font-size: 0.9rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .result-btn:hover {
      background: #283593;
    }

    /* Show More/Less Button */
    .show-more-btn {
      display: block;
      margin: 15px auto;
      padding: 8px 20px;
      background: #1a237e;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.95rem;
      transition: background 0.3s;
    }
    .show-more-btn:hover {
      background: #283593;
    }

    /* Result Card - Mobile Optimized */
    .result-card {
      display: none;
      width: 95%;
      max-width: 700px;
      margin: 15px auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      padding: 15px;
      position: relative;
      overflow-x: auto;
    }
    .result-card-header {
      text-align: center;
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid #1a237e;
    }
    .result-card-header h2 {
      color: #1a237e;
      margin-bottom: 4px;
      font-size: 1.2rem;
    }
    .result-card-header h3 {
      color: #b21f1f;
      margin-bottom: 4px;
      font-size: 1rem;
    }
    .result-card-header p {
      color: #666;
      font-size: 0.8rem;
    }
    
    .student-info {
      margin-bottom: 15px;
    }
    .info-row {
      display: flex;
      flex-direction: column;
      margin-bottom: 6px;
      padding: 6px 10px;
      background: #f5f5f5;
      border-radius: 5px;
    }
    .info-label {
      font-weight: 600;
      color: #1a237e;
      font-size: 0.85rem;
      margin-bottom: 2px;
    }
    .info-value {
      color: #333;
      font-size: 0.9rem;
    }
    
    .marks-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
      min-width: 450px;
    }
    .marks-table th {
      background: #1a237e;
      color: white;
      padding: 8px;
      text-align: left;
      font-size: 0.85rem;
    }
    .marks-table td {
      padding: 8px;
      border-bottom: 1px solid #ddd;
      font-size: 0.85rem;
    }
    .marks-table tr:nth-child(even) {
      background: #f9f9f9;
    }
    .marks-table tr:hover {
      background: #f0f0f0;
    }
    
    .total-marks {
      background: #e8f5e8 !important;
      font-weight: 600;
      color: #1a237e;
    }
    .percentage-display {
      text-align: center;
      font-size: 1.1rem;
      color: #1a237e;
      font-weight: 700;
      padding: 10px;
      background: #f0f7ff;
      border-radius: 8px;
      margin-top: 12px;
    }
    .division-display {
      text-align: center;
      font-size: 1.2rem;
      color: #1a237e;
      font-weight: 700;
      padding: 10px;
      margin-top: 10px;
      border-radius: 8px;
    }
    
    /* Exam Toppers Section in Result Card */
    .exam-toppers-section {
      margin-top: 12px;
      padding: 12px;
      background: #f9f9f9;
      border-radius: 8px;
      border-left: 4px solid #1a237e;
      border-top: 2px solid #ddd;
    }
    .exam-toppers-title {
      font-size: 1rem;
      color: #b21f1f;
      margin-bottom: 12px;
      text-align: center;
      font-weight: 600;
    }
    .exam-toppers-list {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
    }
    .exam-topper-card {
      background: white;
      border-radius: 6px;
      padding: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      text-align: center;
      min-width: 110px;
    }
    .exam-topper-rank {
      background: #1a237e;
      color: white;
      padding: 4px;
      border-radius: 4px;
      font-size: 0.75rem;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .exam-topper-name {
      font-size: 0.85rem;
      font-weight: 600;
      color: #333;
      margin-bottom: 4px;
    }
    .exam-topper-score {
      font-size: 0.85rem;
      color: #1a237e;
      font-weight: 700;
    }
    
    .coaching-mention { 
      text-align: center; 
      margin-top: 20px;
      padding-top: 12px;
      border-top: 2px solid #ddd; 
      color: #666; 
      font-style: italic; 
      font-size: 0.85rem;
    }
    
    .action-buttons { 
      display: flex; 
      justify-content: center; 
      gap: 8px;
      margin-top: 20px;
      padding-top: 12px;
      border-top: 1px solid #ddd; 
      flex-wrap: wrap; 
    }
    .action-buttons button { 
      padding: 8px 12px;
      font-size: 0.85rem;
      border: none; 
      border-radius: 6px;
      cursor: pointer; 
      transition: all 0.3s; 
      display: flex; 
      align-items: center; 
      gap: 4px;
    }
    .download-btn {
      background: #28a745;
      color: white;
    }
    .download-btn:hover {
      background: #218838;
    }
    .back-btn {
      background: #6c757d;
      color: white;
    }
    .back-btn:hover {
      background: #5a6268;
    }
    
    .loading {
      text-align: center;
      padding: 30px 15px;
      font-size: 0.95rem;
      color: #1a237e;
    }
    .error {
      text-align: center;
      padding: 12px;
      background: #ffe6e6;
      color: #b30000;
      border-radius: 5px;
      margin: 12px 0;
    }

    /* Tests Section */
    .tests-section {
      padding: 20px 15px;
      background: #f9f9f9;
      min-height: 500px;
    }
    .tests-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }
    .test-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
      border-left: 5px solid #1a237e;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    .test-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }
    .test-card.new-test {
      border-left-color: #ff4757;
    }
    .test-card h3 {
      color: #1a237e;
      font-size: 1.1rem;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .test-card h3 i {
      color: #ffc107;
    }
    .test-description {
      color: #555;
      font-size: 0.85rem;
      line-height: 1.4;
      margin-bottom: 12px;
    }
    .test-details {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
      flex-wrap: wrap;
      gap: 8px;
    }
    .test-detail {
      display: flex;
      align-items: center;
      gap: 5px;
      color: #666;
      font-size: 0.8rem;
    }
    .test-detail i {
      color: #1a237e;
      font-size: 0.85rem;
    }
    .test-btn {
      display: block;
      width: 100%;
      padding: 10px;
      background: linear-gradient(to right, #1a237e, #283593);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      text-align: center;
      text-decoration: none;
    }
    .test-btn:hover {
      background: linear-gradient(to right, #283593, #303f9f);
      transform: scale(1.02);
    }
    .test-btn i {
      margin-right: 6px;
    }
    .no-tests-message {
      text-align: center;
      padding: 50px 30px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      color: #666;
      margin-top: 15px;
    }
    .no-tests-message i {
      font-size: 2.5rem;
      color: #ddd;
      margin-bottom: 12px;
      display: block;
    }
    .live-badge {
      position: absolute;
      top: -8px;
      right: -8px;
      background: #ff4757;
      color: white;
      padding: 4px 12px;
      font-size: 0.75rem;
      font-weight: bold;
      border-radius: 15px;
      transform: rotate(10deg);
      box-shadow: 0 2px 8px rgba(255,71,87,0.3);
      z-index: 10;
    }

    /* Toppers Section - ALL 30 TOPPERS */
    .toppers-section {
      padding: 15px;
      background: #f5f5f5;
      text-align: center;
    }
    .promo-text {
      font-size: 0.9rem;
      line-height: 1.5;
      color: #1a237e;
      font-weight: 600;
      margin-bottom: 15px;
      white-space: pre-line;
      text-align: left;
      padding: 0 8px;
    }
    .toppers-title {
      font-size: 1.3rem;
      color: #b21f1f;
      margin: 15px 0;
      text-align: center;
    }
    .all-toppers {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
    }
    .topper-card {
      background: white;
      border-radius: 6px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      overflow: hidden;
      text-align: center;
      transition: transform .3s;
      width: 130px;
      padding: 6px;
    }
    .topper-card:hover {
      transform: translateY(-3px);
    }
    .topper-rank {
      background: #1a237e;
      color: white;
      padding: 4px;
      font-weight: 600;
      font-size: 0.75rem;
    }
    .topper-photo {
      width: 55px;
      height: 55px;
      border-radius: 50%;
      margin: 8px auto;
      border: 2px solid #1a237e;
      overflow: hidden;
    }
    .topper-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .topper-name {
      font-size: 0.75rem;
      color: #333;
      margin-top: 4px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1.1;
    }
    .topper-percentage {
      font-size: 0.85rem;
      color: #1a237e;
      font-weight: 700;
      margin: 5px 0;
    }
    
    /* Footer */
    .footer {
      background: #1a237e;
      color: white;
      text-align: center;
      padding: 12px;
      font-size: 0.85rem;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    /* Developer Contact Section */
    .developer-contact {
      background: #f8f9fa;
      padding: 15px;
      text-align: center;
      border-top: 2px solid #1a237e;
      margin-top: 15px;
    }
    .developer-contact h3 {
      color: #1a237e;
      margin-bottom: 12px;
      font-size: 1.1rem;
    }
    .developer-contact p {
      color: #333;
      margin-bottom: 8px;
      font-size: 0.9rem;
    }
    .contact-info {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
      margin-top: 12px;
    }
    .contact-item {
      background: white;
      padding: 10px 15px;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.3s;
    }
    .contact-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .contact-item i {
      color: #1a237e;
      font-size: 1rem;
    }
    
    /* Password Modal */
    .password-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
    }
    .password-box {
      background: white;
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      width: 90%;
      max-width: 400px;
    }
    .password-box h3 {
      color: #1a237e;
      margin-bottom: 20px;
      font-size: 1.3rem;
    }
    .password-input {
      width: 100%;
      padding: 12px 15px;
      font-size: 1rem;
      border: 2px solid #ddd;
      border-radius: 8px;
      margin-bottom: 20px;
      text-align: center;
    }
    .password-input:focus {
      border-color: #1a237e;
      outline: none;
    }
    .password-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    .password-btn {
      padding: 10px 25px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s;
    }
    .password-btn.submit {
      background: #1a237e;
      color: white;
    }
    .password-btn.submit:hover {
      background: #283593;
    }
    .password-btn.cancel {
      background: #6c757d;
      color: white;
    }
    .password-btn.cancel:hover {
      background: #5a6268;
    }
    .password-error {
      color: #dc3545;
      margin-top: 10px;
      font-size: 0.9rem;
      display: none;
    }
    
    /* PDF Generation Fix Styles */
    .pdf-clone-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      z-index: 9999;
      overflow: auto;
      opacity: 0;
      pointer-events: none;
      visibility: hidden;
    }
    
    .pdf-clone {
      width: 100%;
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background: white;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    
    /* Media Queries for Mobile */
    @media (max-width: 768px) {
      body {
        padding: 0;
      }
      
      .container {
        border-radius: 0;
        box-shadow: none;
        margin: 0;
        width: 100%;
      }
      
      .school-name {
        font-size: 1.5rem;
      }
      .header {
        padding: 15px 10px;
      }
      .director-info {
        flex-direction: column;
        text-align: center;
      }
      .director-photo {
        margin-right: 0;
        margin-bottom: 8px;
        width: 80px;
        height: 80px;
      }
      .director-details {
        text-align: center;
      }
      
      .tab-btn {
        padding: 14px 8px;
        font-size: 0.9rem;
      }
      
      .tests-list,
      .results-list {
        grid-template-columns: 1fr;
      }
      
      .topper-card {
        width: 110px;
      }
      .topper-name {
        font-size: 0.7rem;
        height: 28px;
      }
      
      .marks-table {
        font-size: 0.8rem;
        min-width: 400px;
      }
      .marks-table th,
      .marks-table td {
        padding: 6px;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      .action-buttons button {
        width: 100%;
        justify-content: center;
      }
      
      .promo-text {
        font-size: 0.8rem;
      }
      
      .exam-toppers-list {
        gap: 8px;
      }
      .exam-topper-card {
        min-width: 90px;
        padding: 6px;
      }
      
      /* Password modal mobile */
      .password-box {
        padding: 20px;
        margin: 20px;
      }
      .password-buttons {
        flex-direction: column;
      }
      .password-btn {
        width: 100%;
      }
      
      /* Developer contact mobile */
      .contact-info {
        flex-direction: column;
        gap: 8px;
      }
      .contact-item {
        padding: 8px 12px;
      }
      
      /* Adjust PDF clone for mobile */
      .pdf-clone {
        padding: 15px;
        margin: 10px;
      }
    }
    
    @media (max-width: 480px) {
      .school-name {
        font-size: 1.3rem;
      }
      .section-title {
        font-size: 1.2rem;
      }
      .tab-btn {
        padding: 12px 6px;
        font-size: 0.85rem;
      }
      .result-card {
        padding: 12px;
      }
      .marks-table {
        min-width: 320px;
      }
      .marks-table th,
      .marks-table td {
        padding: 5px;
        font-size: 0.75rem;
      }
      .topper-card {
        width: 90px;
        padding: 4px;
      }
      .topper-photo {
        width: 45px;
        height: 45px;
      }
      .topper-percentage {
        font-size: 0.75rem;
      }
      .exam-toppers-list {
        flex-direction: column;
        align-items: center;
      }
      .exam-topper-card {
        width: 90%;
      }
    }
    
    /* Extra small screens */
    @media (max-width: 360px) {
      .school-name {
        font-size: 1.2rem;
      }
      .topper-card {
        width: 85px;
      }
      .marks-table {
        min-width: 300px;
      }
      .all-toppers {
        gap: 6px;
      }
      .topper-name {
        font-size: 0.7rem;
        height: 26px;
      }
    }
  </style>
</head>
<body>
  <!-- Password Modal -->
  <div class="password-modal" id="passwordModal">
    <div class="password-box">
      <h3><i class="fas fa-lock"></i> Admin Access</h3>
      <p>Enter password to open admin panel:</p>
      <input type="password" class="password-input" id="adminPassword" placeholder="Enter password" autocomplete="off">
      <div class="password-error" id="passwordError">Incorrect password!</div>
      <div class="password-buttons">
        <button class="password-btn submit" onclick="checkAdminPassword()">Submit</button>
        <button class="password-btn cancel" onclick="closePasswordModal()">Cancel</button>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Header -->
    <div class="header">
      <h1 class="school-name">QUEST COACHING CENTRE</h1>
      <p class="location">In Front of S.S. Girls High School, Gopalganj</p>
      <div class="director-info">
        <div class="director-photo" onclick="openPasswordModal()">
          <img src="https://i.ibb.co/hF9tmnpB/20250903-202922.jpg">
        </div>
        <div class="director-details">
          <h2>CEO & FOUNDER</h2>
          <h3>MR. RAVI SIR</h3>
          <p><i class="fas fa-phone"></i> Call: +91 9708442525</p>
        </div>
      </div>
    </div>

    <!-- Moving Admission Text -->
    <div class="marquee-container">
      <div class="marquee-content">
        <span>üìö Admission is going on for 6th to 12th &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <span>üìö Admission is going on for 6th to 12th &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <span>üìö Admission is going on for 6th to 12th &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <span>üìö Admission is going on for 6th to 12th &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <span>üìö Admission is going on for 6th to 12th &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      </div>
    </div>

    <!-- Main Tabs Navigation -->
    <div class="main-tabs">
      <button class="tab-btn active" id="results-tab" onclick="switchTab('results')">
        <i class="fas fa-chart-line"></i> Check Results
      </button>
      <button class="tab-btn" id="tests-tab" onclick="openOnlineTest()">
        <i class="fas fa-laptop-code"></i> Online Tests
      </button>
    </div>

    <!-- Results Tab Content -->
    <div class="tab-content active" id="results-content">
      <div class="results-section">
        <div class="loading" id="loading-results">
          <i class="fas fa-spinner fa-spin"></i> Loading available results...
        </div>
        
        <div class="results-list" id="results-list" style="display:none;"></div>
        
        <button class="show-more-btn" id="show-more-btn" style="display:none;" onclick="toggleShowMore()">
          Show More Results
        </button>
        
        <div class="roll-input-section" id="roll-input-section">
          <h3 id="selected-exam-name">Enter your Roll Number</h3>
          <div class="input-group">
            <input type="number" id="roll-input" placeholder="Enter Roll Number">
            <button class="result-btn" onclick="fetchStudentResult()">üìë Get Result</button>
            <button class="result-btn" onclick="goBackToResults()" style="background:#666;">‚¨Ö Back</button>
          </div>
        </div>
        
        <div class="result-card" id="result-card">
          <div class="result-card-header">
            <h2>QUEST COACHING CENTRE GOPALGANJ</h2>
            <h3 id="result-exam-name">Exam Name</h3>
            <p>Under the guidance of <strong>MR. RAVI SIR</strong></p>
          </div>
          
          <div class="student-info">
            <div class="info-row">
              <span class="info-label">Student Name:</span>
              <span class="info-value" id="result-student-name">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Father's Name:</span>
              <span class="info-value" id="result-father-name">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Roll Number:</span>
              <span class="info-value" id="result-roll-no">-</span>
            </div>
          </div>
          
          <table class="marks-table">
            <thead>
              <tr>
                <th>Subject</th>
                <th>Marks Obtained</th>
                <th>Total Marks</th>
                <th>Percentage</th>
              </tr>
            </thead>
            <tbody id="marks-table-body">
              <!-- Marks will be populated here -->
            </tbody>
          </table>
          
          <div class="percentage-display" id="total-percentage">
            Total Percentage: 0%
          </div>
          
          <div class="division-display" id="division-display">
            Division: -
          </div>
          
          <div class="coaching-mention">
            <p>This result is published by QUEST COACHING CENTRE, Gopalganj | Director: MR. RAVI SIR</p>
            <p>For any queries, contact: +91 9708442525</p>
          </div>
          
          <div class="action-buttons">
            <button class="download-btn" onclick="downloadResultAsPDF()">
              <i class="fas fa-download"></i> Download Result PDF
            </button>
            <button class="back-btn" onclick="goBackToResults()">
              <i class="fas fa-arrow-left"></i> Back to Results
            </button>
          </div>
          
          <!-- Exam Toppers Section -->
          <div class="exam-toppers-section" id="exam-toppers-section" style="display:none;">
            <h3 class="exam-toppers-title">üèÜ Top 3 Performers of This Exam</h3>
            <div class="exam-toppers-list" id="exam-toppers-list">
              <!-- Top 3 toppers will be populated here -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tests Tab Content -->
    <div class="tab-content" id="tests-content">
      <div class="tests-section">
        <h2 class="section-title">
          <i class="fas fa-laptop-code"></i> Online Live Tests
        </h2>
        
        <div class="loading" id="loading-tests">
          <i class="fas fa-spinner fa-spin"></i> Loading available tests...
        </div>
        
        <div class="tests-list" id="tests-list" style="display:none;"></div>
        
        <div class="no-tests-message" id="no-tests-message" style="display:none;">
          <i class="fas fa-file-alt"></i>
          <h3>No Tests Available</h3>
          <p>There are no online tests available at the moment.</p>
          <p>Please check back later or contact your teacher.</p>
        </div>
      </div>
    </div>

    <!-- Toppers Section - ALL 30 TOPPERS -->
    <div class="toppers-section">
      <div class="promo-text">
‡§Æ‡§æ‡§§‡•ç‡§∞ 7,200/- ‡§Æ‡•á‡§Ç ‡§∏‡§Ç‡§™‡•Ç‡§∞‡•ç‡§£ ‡§µ‡§ø‡§∑‡§Ø‡•ã‡§Ç ‡§ï‡§ø ‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä ‡§ï‡§∞‡•á ‡§î‡§∞ CBSE ‡§¨‡•ã‡§∞‡•ç‡§°  ‡§è‡§µ‡§Ç ‡§¨‡§ø‡§π‡§æ‡§∞ ‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§Æ‡•á‡§Ç 480+ ‡§Ö‡§Ç‡§ï ‡§≤‡§æ‡§è‡•§

1. ‡§∏‡§≠‡•Ä ‡§µ‡§ø‡§∑‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü‡•á‡§ü ‡§®‡•ã‡§ü‡•ç‡§∏
2. ‡§ö‡•á‡§™‡•ç‡§ü‡§∞ ‡§µ‡§æ‡§á‡§ú VVI Objective ‡§™‡•ç‡§∞‡§∂‡•ç‡§®
3. ‡§ö‡•á‡§™‡•ç‡§ü‡§∞ ‡§µ‡§æ‡§á‡§ú VVI Subjective ‡§™‡•ç‡§∞‡§∂‡•ç‡§®
4. ‡§ö‡•á‡§™‡•ç‡§ü‡§∞ ‡§µ‡§æ‡§á‡§ú ‡§ü‡•á‡§∏‡•ç‡§ü ‡§∏‡•Ä‡§∞‡•Ä‡§ú
5. ‡§™‡§ø‡§õ‡§≤‡•á 20 ‡§µ‡§∞‡•ç‡§∑‡•ã ‡§ï‡§æ Question Bank ‡§ï‡§æ ‡§π‡§≤
6. ‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§Æ‡•á‡§Ç 480+ ‡§Ö‡§Ç‡§ï ‡§≤‡§æ‡§®‡•á ‡§ï‡§æ ‡§ü‡§ø‡§™‡•ç‡§∏ & ‡§ü‡•ç‡§∞‡§ø‡§ï‡•ç‡§∏

‚ú® ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§∏‡§æ‡§≤ ‡§ï‡•Ä ‡§§‡§∞‡§π ‡§á‡§∏ ‡§∏‡§æ‡§≤ ‡§≠‡•Ä 2 ‡§ú‡§®‡§µ‡§∞‡•Ä 2026 ‡§∏‡•á ‡§∏‡§≠‡•Ä ‡§ï‡•ç‡§≤‡§æ‡§∏‡•á‡§ú ‡§ï‡§æ ‡§®‡§Ø‡§æ ‡§¨‡•à‡§ö ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã‡§®‡•á ‡§ú‡§æ ‡§∞‡§π‡§æ ‡§π‡•à‡•§

üéØ ‡§ú‡§ø‡§∏‡§ï‡§æ ‡§è‡§ï ‡§π‡•Ä ‡§Æ‡§ï‡§∏‡§¶ ‡§π‡•ã‡§ó‡§æ ‡§ï‡§ø ‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§π‡§æ‡§≤ ‡§Æ‡•á‡§Ç 2027 ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§Æ‡•á‡§Ç ‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§ü‡•â‡§™-10 ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡•§
      </div>

      <h2 class="toppers-title">-----OUR TOPPERS ------</h2>
      <div class="all-toppers">
        <!-- ALL 30 TOPPERS -->
        <div class="topper-card">
          <div class="topper-rank">1st</div>
          <div class="topper-photo"><img src="https://i.ibb.co/Jw8CzGzQ/IMG-20250904-WA0012.jpg"></div>
          <h3 class="topper-name">‡§∞‡§ø‡§Ç‡§ï‡•Ä ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">469 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">2nd</div>
          <div class="topper-photo"><img src="https://i.ibb.co/XxMqpmH5/IMG-20250904-WA0013.jpg"></div>
          <h3 class="topper-name">‡§∏‡§æ‡§π‡§ø‡§≤ ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">465 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">3rd</div>
          <div class="topper-photo"><img src="https://i.ibb.co/G3VVPSqZ/IMG-20250904-WA0014.jpg"></div>
          <h3 class="topper-name">‡§∞‡•å‡§®‡§ï ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">453 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">4th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/TxNS2sQ8/IMG-20250904-WA0015.jpg"></div>
          <h3 class="topper-name">‡§∏‡§§‡•ç‡§Ø‡§Æ ‡§ï‡•Å‡§Æ‡§æ‡§∞ ‡§∏‡§ø‡§Ç‡§π</h3>
          <div class="topper-percentage">447 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">5th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/991nS5Cx/IMG-20250904-WA0016.jpg"></div>
          <h3 class="topper-name">‡§Ö‡§≠‡§ø‡§∞‡§æ‡§ú ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">446 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">6th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/pj5mp7JF/IMG-20250904-WA0017.jpg"></div>
          <h3 class="topper-name">‡§∏‡•ã‡§®‡•Ä ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">446 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">7th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/JwGMNwF6/IMG-20250904-WA0018.jpg"></div>
          <h3 class="topper-name">‡§∞‡§ø‡§∂‡•Å ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä ‡§∞‡§æ‡§Ø</h3>
          <div class="topper-percentage">445 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">8th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/JWhkzfbG/IMG-20250904-WA0019.jpg"></div>
          <h3 class="topper-name">‡§§‡§™‡•á‡§∂‡•ç‡§µ‡§∞‡•Ä ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">444 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">9th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/21DCkH7y/IMG-20250904-WA0020.jpg"></div>
          <h3 class="topper-name">‡§∞‡§æ‡§ú‡§ï‡•É‡§§ ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">444 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">10th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/4nn6YZdt/IMG-20250904-WA0021-1.jpg"></div>
          <h3 class="topper-name">‡§§‡§∞‡•Å‡§£ ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">439 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">11th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/yFDsffpF/IMG-20250904-WA0022.jpg"></div>
          <h3 class="topper-name">‡§∞‡§Æ‡§ø‡§§‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">439 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">12th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/v6MCpZ4R/IMG-20250904-WA0023.jpg"></div>
          <h3 class="topper-name">‡§ú‡§ø‡§ú‡•ç‡§û‡§æ‡§∏‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">434 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">13th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/kggFk370/IMG-20250904-WA0024.jpg"></div>
          <h3 class="topper-name">‡§ñ‡•Å‡§∂‡•ç‡§¨‡•Ç ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">431 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">14th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/7J0J30c7/IMG-20250904-WA0025.jpg"></div>
          <h3 class="topper-name">‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">430 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">15th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/7JRgb628/IMG-20250904-WA0027.jpg"></div>
          <h3 class="topper-name">‡§ï‡§∞‡§£ ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">427 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">16th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/bjSNtXPz/IMG-20250904-WA0028.jpg"></div>
          <h3 class="topper-name">‡§∞‡§ø‡§∂‡•Å ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">425 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">17th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/ZpkDP0pF/IMG-20250904-WA0029.jpg"></div>
          <h3 class="topper-name">‡§à‡§∂‡•Å ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">425 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">18th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/4Zcy07cj/IMG-20250904-WA0030.jpg"></div>
          <h3 class="topper-name">‡§≤‡§ï‡•ç‡§ï‡•Ä ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">422 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">19th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/Y4b3gBHK/IMG-20250904-WA0031.jpg"></div>
          <h3 class="topper-name">‡§Ö‡§∂‡•ã‡§ï ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">422 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">20th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/nN8pWkvv/IMG-20250904-WA0032.jpg"></div>
          <h3 class="topper-name">‡§π‡§∞‡•ç‡§∑‡§ø‡§§ ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">422 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">21st</div>
          <div class="topper-photo"><img src="https://i.ibb.co/hhNYK2y/IMG-20250904-WA0033.jpg"></div>
          <h3 class="topper-name">‡§™‡•ç‡§∞‡§ø‡§Ø‡§Ç‡§ï‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">418 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">22nd</div>
          <div class="topper-photo"><img src="https://i.ibb.co/tp1HQ0DN/IMG-20250904-WA0034.jpg"></div>
          <h3 class="topper-name">‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">417 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">23rd</div>
          <div class="topper-photo"><img src="https://i.ibb.co/5XSrj1rh/IMG-20250904-WA0035-1.jpg"></div>
          <h3 class="topper-name">‡§®‡§µ‡•ç‡§Ø‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">414 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">24th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/gMGvJ7Xs/IMG-20250905-WA0007.jpg"></div>
          <h3 class="topper-name">‡§Ö‡§Ç‡§ï‡•Å‡§∂ ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">409 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">25th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/hRD1Jmcm/IMG-20250905-WA0008.jpg"></div>
          <h3 class="topper-name">‡§∏‡§Ç‡§ú‡§®‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">404 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">26th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/BHJjbmjY/IMG-20250905-WA0009.jpg"></div>
          <h3 class="topper-name">‡§∞‡•ã‡§∂‡§®‡•Ä ‡§ó‡•Å‡§™‡•ç‡§§‡§æ</h3>
          <div class="topper-percentage">403 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">27th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/60r3W27h/IMG-20250905-WA0010.jpg"></div>
          <h3 class="topper-name">‡§Ü‡§¶‡§ø‡§§‡•ç‡§Ø ‡§ï‡•Å‡§Æ‡§æ‡§∞</h3>
          <div class="topper-percentage">402 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">28th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/WW1KTJQz/IMG-20250905-WA0011.jpg"></div>
          <h3 class="topper-name">‡§∞‡•ã‡§∂‡§®‡•Ä ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">402 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">29th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/gbgfm4S2/IMG-20250905-WA0012-1.jpg"></div>
          <h3 class="topper-name">‡§∞‡•Å‡§™‡§æ‡§≤‡•Ä ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">402 ‡§Ö‡§Ç‡§ï</div>
        </div>
        <div class="topper-card">
          <div class="topper-rank">30th</div>
          <div class="topper-photo"><img src="https://i.ibb.co/nSG3RX7/IMG-20250905-WA0013.jpg"></div>
          <h3 class="topper-name">‡§∏‡•ç‡§®‡•á‡§π‡§æ ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä</h3>
          <div class="topper-percentage">401 ‡§Ö‡§Ç‡§ï</div>
        </div>
      </div>
    </div>

    <!-- Developer Contact Section -->
    <div class="developer-contact">
      <h3><i class="fas fa-laptop-code"></i> Website Development Contact</h3>
      <p>This website was developed by:</p>
      <div class="contact-info">
        <div class="contact-item">
          <i class="fas fa-phone"></i>
          <span>Phone: 8580594404</span>
        </div>
        <div class="contact-item">
          <i class="fas fa-envelope"></i>
          <span>Email: kk5674010@gmail.com</span>
        </div>
      </div>
      <p style="margin-top: 15px; color: #666; font-size: 0.9rem;">
        If you want a similar website for your coaching centre or business, feel free to contact me.
      </p>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>&copy; 2023 QUEST COACHING CENTRE. All Rights Reserved.</p>
    </div>
  </div>

  <!-- PDF Clone Container (Hidden) -->
  <div id="pdf-clone-container" class="pdf-clone-container"></div>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBoAqrgPwwM7GNyURqXrJEYWPihKKR8VGg",
      authDomain: "quest-coaching.firebaseapp.com",
      databaseURL: "https://quest-coaching-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "quest-coaching",
      storageBucket: "quest-coaching.firebasestorage.app",
      messagingSenderId: "131948734089",
      appId: "1:131948734089:web:f4ba25110c8b1298360858"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Global variables
    let allResults = [];
    let selectedExamId = null;
    let selectedExamData = null;
    let currentStudentResult = null;
    let newResults = [];
    let viewedResults = [];
    let showAllResults = false;
    let onlineTests = [];
    let currentTab = 'results';

    // Password Modal Functions
    function openPasswordModal() {
      const modal = document.getElementById('passwordModal');
      modal.style.display = 'flex';
      document.getElementById('adminPassword').focus();
      document.getElementById('passwordError').style.display = 'none';
    }

    function closePasswordModal() {
      const modal = document.getElementById('passwordModal');
      modal.style.display = 'none';
      document.getElementById('adminPassword').value = '';
    }

    function checkAdminPassword() {
      const password = document.getElementById('adminPassword').value;
      const errorElement = document.getElementById('passwordError');
      
      if (password === "4805") {
        closePasswordModal();
        window.open('admin.html', '_blank');
      } else {
        errorElement.style.display = 'block';
        document.getElementById('adminPassword').value = '';
        document.getElementById('adminPassword').focus();
      }
    }

    // Enter key support for password input
    document.getElementById('adminPassword').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        checkAdminPassword();
      }
    });

    // Click outside modal to close
    document.getElementById('passwordModal').addEventListener('click', function(e) {
      if (e.target.id === 'passwordModal') {
        closePasswordModal();
      }
    });

    // NEW FUNCTION: Open Online Test Page
    function openOnlineTest() {
      window.open('onlinetest.html', '_blank');
    }

    // Switch between tabs
    function switchTab(tabName) {
      currentTab = tabName;
      
      document.getElementById('results-tab').classList.toggle('active', tabName === 'results');
      document.getElementById('tests-tab').classList.toggle('active', tabName === 'tests');
      
      document.getElementById('results-content').classList.toggle('active', tabName === 'results');
      document.getElementById('tests-content').classList.toggle('active', tabName === 'tests');
      
      if (tabName === 'results' && allResults.length === 0) {
        fetchAllResults();
      }
    }

    // Load viewed results from localStorage
    function loadViewedResults() {
      const stored = localStorage.getItem('quest_viewed_results');
      viewedResults = stored ? JSON.parse(stored) : [];
    }

    // Save viewed results to localStorage
    function saveViewedResults() {
      localStorage.setItem('quest_viewed_results', JSON.stringify(viewedResults));
    }

    // Mark a result as viewed
    function markResultAsViewed(resultId) {
      if (!viewedResults.includes(resultId)) {
        viewedResults.push(resultId);
        saveViewedResults();
      }
    }

    // Check if a result is "new" (not viewed yet)
    function isResultNew(resultId) {
      return !viewedResults.includes(resultId);
    }

    // Fetch all results from Firestore
    async function fetchAllResults() {
      try {
        loadViewedResults();
        
        const querySnapshot = await db.collection("results").get();
        allResults = [];
        newResults = [];
        
        querySnapshot.forEach((doc) => {
          const data = doc.data();
          const resultId = doc.id;
          const isNew = isResultNew(resultId);
          
          if (isNew) {
            newResults.push(resultId);
          }
          
          allResults.push({
            id: resultId,
            examName: data.examName || "Unnamed Exam",
            createdAt: data.createdAt ? new Date(data.createdAt.toDate()).toLocaleDateString('en-IN', {
              day: 'numeric',
              month: 'long',
              year: 'numeric'
            }) : "Date not available",
            data: data,
            isNew: isNew
          });
        });
        
        // Sort by date (newest first)
        allResults.sort((a, b) => {
          return b.data.createdAt?.toDate() - a.data.createdAt?.toDate();
        });
        
        displayResultsList();
      } catch (error) {
        console.error("Error fetching results:", error);
        document.getElementById("loading-results").innerHTML = 
          '<div class="error">Error loading results. Please try again later.</div>';
      }
    }

    // Display results list (show only latest 4 initially)
    function displayResultsList() {
      const resultsList = document.getElementById("results-list");
      const loading = document.getElementById("loading-results");
      const showMoreBtn = document.getElementById("show-more-btn");
      
      if (allResults.length === 0) {
        loading.innerHTML = '<div class="error">No results available at the moment.</div>';
        return;
      }
      
      loading.style.display = "none";
      resultsList.style.display = "grid";
      
      // Determine which results to show
      const resultsToShow = showAllResults ? allResults : allResults.slice(0, 4);
      
      let html = "";
      resultsToShow.forEach((result, index) => {
        const newSticker = result.isNew ? '<div class="new-sticker">NEW</div>' : '';
        html += `
          <div class="result-item" onclick="selectExam('${result.id}', ${index})" id="result-item-${index}">
            ${newSticker}
            <div class="exam-name">${result.examName}</div>
            <div class="exam-date">üìÖ Published: ${result.createdAt}</div>
          </div>
        `;
      });
      
      resultsList.innerHTML = html;
      
      // Show or hide "Show More" button
      if (allResults.length > 4) {
        showMoreBtn.style.display = "block";
        showMoreBtn.textContent = showAllResults ? "Show Less" : "Show More Results";
      } else {
        showMoreBtn.style.display = "none";
      }
    }

    // Toggle between showing all results and latest 4 only
    function toggleShowMore() {
      showAllResults = !showAllResults;
      displayResultsList();
    }

    // Select an exam
    function selectExam(examId, index) {
      selectedExamId = examId;
      // Find the selected exam data
      const selectedResult = allResults.find(result => result.id === examId);
      if (selectedResult) {
        selectedExamData = selectedResult.data;
      }
      
      // Mark this result as viewed (remove NEW sticker)
      markResultAsViewed(examId);
      
      // Update the result item to remove NEW sticker
      const resultItem = document.getElementById(`result-item-${index}`);
      if (resultItem) {
        const newSticker = resultItem.querySelector('.new-sticker');
        if (newSticker) {
          newSticker.remove();
        }
      }
      
      // Highlight selected item
      document.querySelectorAll('.result-item').forEach(item => {
        item.classList.remove('active');
      });
      if (resultItem) {
        resultItem.classList.add('active');
      }
      
      // Show roll number input section
      document.getElementById('selected-exam-name').textContent = 
        `Enter your Roll Number for: ${selectedExamData.examName}`;
      document.getElementById('results-list').style.display = 'none';
      document.getElementById('show-more-btn').style.display = 'none';
      document.getElementById('roll-input-section').style.display = 'block';
      document.getElementById('result-card').style.display = 'none';
      
      // Clear previous input
      document.getElementById('roll-input').value = '';
    }

    // Go back to results list
    function goBackToResults() {
      document.getElementById('results-list').style.display = 'grid';
      document.getElementById('roll-input-section').style.display = 'none';
      document.getElementById('result-card').style.display = 'none';
      selectedExamId = null;
      selectedExamData = null;
      currentStudentResult = null;
      
      // Show/hide show more button
      const showMoreBtn = document.getElementById('show-more-btn');
      if (allResults.length > 4) {
        showMoreBtn.style.display = 'block';
      }
      
      // Remove active class
      document.querySelectorAll('.result-item').forEach(item => {
        item.classList.remove('active');
      });
    }

    // Calculate division based on percentage
    function calculateDivision(percentage) {
      if (percentage >= 60) {
        return {
          division: "FIRST DIVISION",
          color: "#28a745",
          bgColor: "#d4edda"
        };
      } else if (percentage >= 45) {
        return {
          division: "SECOND DIVISION",
          color: "#17a2b8",
          bgColor: "#d1ecf1"
        };
      } else if (percentage >= 30) {
        return {
          division: "THIRD DIVISION",
          color: "#ffc107",
          bgColor: "#fff3cd"
        };
      } else {
        return {
          division: "FAIL",
          color: "#dc3545",
          bgColor: "#f8d7da"
        };
      }
    }

    // Calculate top 3 performers for the exam
    function calculateTopPerformers() {
      if (!selectedExamData || !selectedExamData.students) {
        return [];
      }
      
      const studentsWithScores = selectedExamData.students.map(student => {
        let totalObtained = 0;
        let totalPossible = 0;
        
        if (student.marks && selectedExamData.subjects) {
          selectedExamData.subjects.forEach(subject => {
            const subjectTotal = subject.total || 100;
            const marksObtained = student.marks[subject.name] || 0;
            totalObtained += marksObtained;
            totalPossible += subjectTotal;
          });
        }
        
        const percentage = totalPossible > 0 ? (totalObtained / totalPossible) * 100 : 0;
        
        return {
          name: student.name,
          rollNo: student.rollNo,
          totalObtained: totalObtained,
          percentage: percentage
        };
      });
      
      // Sort by percentage (highest first)
      studentsWithScores.sort((a, b) => b.percentage - a.percentage);
      
      // Group students by rank (handle ties)
      const rankedStudents = [];
      let currentRank = 1;
      let previousPercentage = null;
      let skipCount = 0;
      
      for (let i = 0; i < studentsWithScores.length && rankedStudents.length < 3; i++) {
        const student = studentsWithScores[i];
        
        if (student.percentage !== previousPercentage) {
          currentRank = i + 1;
        }
        
        if (currentRank <= 3) {
          rankedStudents.push({
            ...student,
            rank: currentRank
          });
        }
        
        previousPercentage = student.percentage;
      }
      
      return rankedStudents;
    }

    // Display top performers in the result card
    function displayTopPerformers(topPerformers) {
      const toppersSection = document.getElementById('exam-toppers-section');
      const toppersList = document.getElementById('exam-toppers-list');
      
      if (topPerformers.length === 0) {
        toppersSection.style.display = 'none';
        return;
      }
      
      let html = '';
      topPerformers.forEach(performer => {
        const rankText = performer.rank === 1 ? '1st' : 
                        performer.rank === 2 ? '2nd' : 
                        performer.rank === 3 ? '3rd' : `${performer.rank}th`;
        
        html += `
          <div class="exam-topper-card">
            <div class="exam-topper-rank">${rankText} Rank</div>
            <div class="exam-topper-name">${performer.name}</div>
            <div class="exam-topper-score">${performer.percentage.toFixed(2)}%</div>
          </div>
        `;
      });
      
      toppersList.innerHTML = html;
      toppersSection.style.display = 'block';
    }

    // Fetch student result
    function fetchStudentResult() {
      const rollInput = document.getElementById('roll-input').value.trim();
      
      if (!rollInput) {
        alert("Please enter your roll number");
        return;
      }
      
      if (!selectedExamData || !selectedExamData.students) {
        alert("Exam data not loaded properly. Please go back and select again.");
        return;
      }
      
      // Find student by roll number
      const student = selectedExamData.students.find(s => s.rollNo == rollInput);
      
      if (!student) {
        alert("Roll number not found in this exam.");
        return;
      }
      
      // Calculate top performers for this exam
      const topPerformers = calculateTopPerformers();
      
      // Display result with top performers
      displayStudentResult(student, topPerformers);
    }

    // Display student result
    function displayStudentResult(student, topPerformers) {
      currentStudentResult = student;
      
      // Hide input section, show result card
      document.getElementById('roll-input-section').style.display = 'none';
      const resultCard = document.getElementById('result-card');
      resultCard.style.display = 'block';
      
      // Set exam info
      document.getElementById('result-exam-name').textContent = selectedExamData.examName;
      
      // Set student info
      document.getElementById('result-student-name').textContent = student.name || "-";
      document.getElementById('result-father-name').textContent = student.fatherName || "-";
      document.getElementById('result-roll-no').textContent = student.rollNo || "-";
      
      // Calculate and display marks
      const marksTable = document.getElementById('marks-table-body');
      let html = '';
      let totalObtained = 0;
      let totalPossible = 0;
      
      if (student.marks && selectedExamData.subjects) {
        // Loop through subjects from exam data
        selectedExamData.subjects.forEach(subject => {
          const subjectName = subject.name;
          const subjectTotal = subject.total || 100;
          const marksObtained = student.marks[subjectName] || 0;
          const percentage = ((marksObtained / subjectTotal) * 100).toFixed(2);
          
          html += `
            <tr>
              <td>${subjectName}</td>
              <td>${marksObtained}</td>
              <td>${subjectTotal}</td>
              <td>${percentage}%</td>
            </tr>
          `;
          
          totalObtained += marksObtained;
          totalPossible += subjectTotal;
        });
        
        // Add total row
        const totalPercentage = totalPossible > 0 ? ((totalObtained / totalPossible) * 100).toFixed(2) : 0;
        html += `
          <tr class="total-marks">
            <td><strong>Total</strong></td>
            <td><strong>${totalObtained}</strong></td>
            <td><strong>${totalPossible}</strong></td>
            <td><strong>${totalPercentage}%</strong></td>
          </tr>
        `;
        
        document.getElementById('total-percentage').textContent = 
          `Total Percentage: ${totalPercentage}%`;
        
        // Calculate and display division
        const divisionInfo = calculateDivision(parseFloat(totalPercentage));
        const divisionElement = document.getElementById('division-display');
        divisionElement.textContent = `Division: ${divisionInfo.division}`;
        divisionElement.style.backgroundColor = divisionInfo.bgColor;
        divisionElement.style.color = divisionInfo.color;
        divisionElement.style.border = `2px solid ${divisionInfo.color}`;
        
      } else {
        html = '<tr><td colspan="4" style="text-align:center;">Marks data not available</td></tr>';
        document.getElementById('division-display').textContent = 'Division: N/A';
      }
      
      marksTable.innerHTML = html;
      
      // Display top performers
      displayTopPerformers(topPerformers);
      
      // Scroll to result
      resultCard.scrollIntoView({ behavior: 'smooth' });
    }

    // Create clone for PDF generation (WITHOUT TOP PERFORMERS SECTION)
    function createPDFClone() {
      const resultCard = document.getElementById('result-card');
      const cloneContainer = document.getElementById('pdf-clone-container');
      
      // Clear previous clone
      cloneContainer.innerHTML = '';
      
      // Create a deep clone of the result card
      const clone = resultCard.cloneNode(true);
      clone.classList.add('pdf-clone');
      clone.style.display = 'block';
      clone.style.width = '100%';
      clone.style.maxWidth = '800px';
      clone.style.margin = '20px auto';
      clone.style.padding = '20px';
      clone.style.background = 'white';
      clone.style.boxShadow = '0 0 20px rgba(0,0,0,0.1)';
      clone.style.position = 'relative';
      clone.style.left = '0';
      clone.style.top = '0';
      clone.style.transform = 'none';
      clone.style.zIndex = '10001';
      
      // Remove action buttons from clone
      const actionButtons = clone.querySelector('.action-buttons');
      if (actionButtons) {
        actionButtons.remove();
      }
      
      // Remove exam toppers section from clone (so it doesn't appear in PDF)
      const examToppersSection = clone.querySelector('.exam-toppers-section');
      if (examToppersSection) {
        examToppersSection.remove();
      }
      
      // Show the clone container and add the clone
      cloneContainer.appendChild(clone);
      cloneContainer.style.visibility = 'visible';
      cloneContainer.style.opacity = '0';
      cloneContainer.style.pointerEvents = 'none';
      
      return clone;
    }

    // Preload all images in the result card
    function preloadImages(callback) {
      const images = document.querySelectorAll('#result-card img');
      let loadedCount = 0;
      const totalImages = images.length;
      
      if (totalImages === 0) {
        callback();
        return;
      }
      
      const onImageLoad = () => {
        loadedCount++;
        if (loadedCount === totalImages) {
          callback();
        }
      };
      
      images.forEach(img => {
        if (img.complete) {
          onImageLoad();
        } else {
          img.onload = onImageLoad;
          img.onerror = onImageLoad;
        }
      });
    }

    // Download result as PDF
    function downloadResultAsPDF() {
      // Disable the download button to prevent multiple clicks
      const downloadBtn = document.querySelector('.download-btn');
      const originalText = downloadBtn.innerHTML;
      downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating PDF...';
      downloadBtn.disabled = true;
      
      // Create a clone for PDF generation (without top performers)
      const clone = createPDFClone();
      const cloneContainer = document.getElementById('pdf-clone-container');
      
      // Show the clone container (but keep it invisible)
      cloneContainer.style.visibility = 'visible';
      cloneContainer.style.opacity = '0';
      
      // Wait a bit for DOM to settle
      setTimeout(() => {
        // Preload images before generating PDF
        preloadImages(() => {
          // Generate PDF with optimized settings
          const options = {
            margin: [10, 10, 10, 10],
            filename: `Result_${currentStudentResult?.rollNo || 'unknown'}.pdf`,
            image: { 
              type: 'jpeg', 
              quality: 0.98 
            },
            html2canvas: { 
              scale: 2,
              useCORS: true,
              letterRendering: true,
              scrollX: 0,
              scrollY: 0,
              windowWidth: clone.scrollWidth,
              windowHeight: clone.scrollHeight,
              backgroundColor: '#ffffff',
              logging: false,
              onclone: function(clonedDoc) {
                // Ensure all images in clone are visible
                const clonedImages = clonedDoc.querySelectorAll('img');
                clonedImages.forEach(img => {
                  img.style.display = 'block';
                  img.style.maxWidth = '100%';
                  img.style.height = 'auto';
                });
              }
            },
            jsPDF: { 
              unit: 'mm', 
              format: 'a4', 
              orientation: 'portrait',
              compress: true
            },
            pagebreak: { 
              mode: ['avoid-all', 'css', 'legacy'],
              before: '.page-break-before',
              after: '.page-break-after',
              avoid: ['.no-break', 'tr', 'td']
            }
          };
          
          // Generate and save PDF
          html2pdf().set(options).from(clone).save().then(() => {
            // Cleanup: hide the clone container
            cloneContainer.style.visibility = 'hidden';
            cloneContainer.innerHTML = '';
            
            // Re-enable the download button
            downloadBtn.innerHTML = originalText;
            downloadBtn.disabled = false;
            
            // Show success message
            alert('PDF downloaded successfully!');
          }).catch(error => {
            console.error('PDF generation error:', error);
            cloneContainer.style.visibility = 'hidden';
            cloneContainer.innerHTML = '';
            
            // Re-enable the download button
            downloadBtn.innerHTML = originalText;
            downloadBtn.disabled = false;
            
            // Fallback: try simple method
            alert('Generating PDF... Please wait.');
            try {
              const fallbackOptions = {
                margin: 10,
                filename: `Result_${currentStudentResult?.rollNo || 'unknown'}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
              };
              
              html2pdf().set(fallbackOptions).from(resultCard).save().then(() => {
                downloadBtn.innerHTML = originalText;
                downloadBtn.disabled = false;
              });
            } catch (fallbackError) {
              alert('Error generating PDF. Please try again or take a screenshot.');
              downloadBtn.innerHTML = originalText;
              downloadBtn.disabled = false;
            }
          });
        });
      }, 500);
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
      // Load results initially
      fetchAllResults();
    });
  </script>
</body>
</html>
